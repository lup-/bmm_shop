# Репо

```shell
git clone git@github.com:lup-/bmm_shop.git
cd bmm_shop
cp .env.sample .env
```
# Верстка
Все файлы макетов -- в папке html
```shell
cd html
npm i
npm run dev
```

Последняя команда запускает webpack, который наблюдает за js и scss файлами в папке src и пересобирает их.

Собранные файлы оказываются в папке dist. Файлы из папки dist нужно использовать для подключения в html-макетах.

Пример макета -- index.html.

Работает только сборка, поэтому файл в браузере нужно обновлять вручную при изменениях.

Дополнительные данные можно посмотреть [тут](https://github.com/noreading/bootstrap4-webpack-boilerplate#bootstrap-4--webpack-4--boilerplate)

# Бэкенд
## Запуск виртуалки
При первом запуске будет загружено ядро Битрикса, которое нужно будет установить.
Поэтому в первый раз лучше запустить с привязкой к консоли, чтобы дождаться окончания загрузки.

```shell
docker-compose up
```

А потом можно запускать в фоновом режиме
```shell
docker-compose up -d
```


## Установка Bitrix

Переходим по адресу http://localhost:8197/setup.php (порт из HTTP_PORT в .env) и устанавливаем битрикс.

### Шаг 1: Начало установки
 - "Далее"


### Шаг 2: Лицензионное соглашение
 - [x] "Я принимаю лицензионнное соглашение"
 - "Далее"


### Шаг 3: Регистрация продукта
 - [ ] "Я хочу зарегистрировать..."
 - [x] "Установить в кодировке UTF-8"
 - "Далее"

### Шаг 4: Предварительная проверка
 - Все, кроме версии nginx зеленое
 - Далее

### Шаг 5: Создание базы данных
 - Сервер: database
 - Пользователь: существующий
 - Имя пользователя: bitrix (DATABASE_USER из .env)
 - Пароль: teHaesh4 (DATABASE_PASSWORD из .env)
 - База данных: существующая
 - Имя базы данных: bitrix (DATABASE_SCHEMA из .env)

### Шаг 6: Параметры администратора сайта
 - Логин: admin
 - Пароль: teHaesh4 (или другой)
 - Подтверждение: teHaesh4 (или другой)
 - E-Mail: свой

### Шаг 7: Выберите решение для установки
 - Интернет-магазин

### Остальное:
 - На свой вкус

### После установки

Установщик использует index.php для своих нужд. При скачке ядра, index.php из репозитория сохраняется под именем index.php.setup
Его нужно переместить обратно после окончания установки Битрикса. Или нужно перезагрузить виртуалки, тогда он будет перемещен автоматически.